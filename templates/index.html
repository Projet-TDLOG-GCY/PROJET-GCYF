<!DOCTYPE html>
<html lang="fr">

<head>
  <title>Pricer</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </script>
  <script>
    function afficherPopup() {
      var texteSaisi = document.getElementById("inputText").value.toLowerCase();

      fetch(`/stock_data/${texteSaisi}`)
        .then(response => response.json())
        .then(data => {
          const ctx = document.getElementById('stockChart').getContext('2d');
          const myChart = new Chart(ctx, {
            type: 'line',
            data: {
              labels: data.labels,
              datasets: [{
                label: 'Cours de l\'action',
                data: data.values,
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 1
              }]
            },
            options: {
              // Configuration du graphique (titre, légende, axes, etc.)
              // Vous pouvez personnaliser selon vos besoins
            }
          });
          $('#myModal').modal('show');          
        });
    }
    
  </script>
</head>

<body>
  <div class="banner">
    <!-- Menu horizontal pour les onglets -->
    <nav class="navigation">
      <ul>
        <li><a href="{{ url_for('hello') }}">Pricer</a></li>
        <li><a href="{{ url_for('about_us') }}">About us</a></li>
      </ul>
      <!-- Bouton Dark Mode dans la bannière -->
      <button id="dark-mode-toggle">Activer/Désactiver le Mode Sombre</button>
    </nav>
  </div>

  <main id="main-container" class="main-container">
    <header class="header">
      <h1 class="header-title">Pricer</h1>
    </header>

    <section class="messages-container" id="messages-container">
      <div class="message message-ai">
        AI powered pricer for quantitative finance.
      </div>
    </section>

    <!-- Barre de saisie de texte -->
    <input type="text" id="inputText" placeholder="Saisissez le symbol de la marque qui vous intérèsse...">
    <!-- Bouton pour afficher la pop-up en fonction du texte saisi -->
    <button class="btn btn-primary" onclick="afficherPopup()">Valider</button>

    <!-- Modal (Pop-up) -->
    <div class="modal fade" id="myModal">
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <!-- Contenu de la pop-up -->
          <div class="modal fade" id="myModal">
            <div class="modal-dialog modal-lg modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-body">
                  <canvas id="stockChart" width="400" height="200"></canvas>
                </div>
              </div>
            </div>
          </div>
          <!-- Bouton pour fermer la pop-up -->
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
          </div>
        </div>
      </div>
    </div>

    <div class="choose-option">
      <form action="/choix_option" method="post">
        <p>Quel type d'option choisis-tu ?</p>
        <div class="option-buttons">
          <button type="submit" name="option" value="americaine">Option Américaine</button>
          <button type="submit" name="option" value="europenne">Option Européenne</button>
        </div>
      </form>
    </div>
  </main>
  <script src="{{ url_for('static', filename='prompt.js') }}"></script>
</body>

</html>
